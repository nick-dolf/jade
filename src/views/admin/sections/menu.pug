mixin menu-item(index, title, link)
  li.list-group-item
    div.row.gy-1
      div.col-md-3
        label.form-label title
        input.form-control(name=`menu[${index}][title]` value=title)
        label link
        select(class="form-select" name=`menu[${index}][link]` value=link)
          for page in site.series
            option= page
      div.col-md-6.container
        img.img-fluid.img-thumbnail(
          height=150 width=150 
          src= site.baseURL + "/admin/src/assets/images/home/thumb/fieldwork.jpg")
        button.btn.btn-primary(type="button"
                                  data-bs-toggle="modal" data-bs-target="#imageModal"
                                  onclick="setActive(event)"
                                ) Select Image

ul.list-group-flush.accordion-body(id='menu')
  for item, index in menu
    +menu-item(index, item.title, item.link)

  li.list-group-item
    button.btn.btn-primary(onclick=`newCardImage('test', 'menu')` type='button') Add

div.modal(id="imageModal" tabindex="-1" role="dialog")
  div.modal-dialog.modal-xl
    div.modal-content
      div.modal-header
        h3.modal-title Select Image
        button.close(type="button" data-bs-dismiss="modal" aria-label="Close")
          span(aria-hidden="true") &times;
      div.modal-body
        for image in images
          button.btn.m-1(type="button" onclick=`changeImg("${image}")`)
            img.img-thumbnail(
              height= 100 width=100
              src= site.baseURL + "/admin/src/assets/images/home/thumb/" + image
            )
      div.modal-footer
        button.btn.btn-primary(type="button" data-bs-dismiss="modal") Save 

script.
  let active;

  function setActive(event) {
    active = event.target.parentNode;
    console.log(active)
  }

  function changeImg(img) {
    const imgTag = active.getElementsByTagName('img')[0]
    imgTag.src = "!{site.baseURL}" + "/admin/src/assets/images/home/thumb/" + img
    console.log(img)
  }
  
